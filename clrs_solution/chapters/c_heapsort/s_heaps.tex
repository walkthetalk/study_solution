\startsection[
  reference=section:heaps,
  title={Heaps},
]

%e6.1-1
\startEXERCISE
在高度爲 \m{h} 的堆，最多有多少個元素，最少又有多少個元素？
\stopEXERCISE

\startANSWER
令高度爲 \m{h} 的堆中元素個數爲 \m{i}，則\m{2^h \le i \le (2^{h+1} - 1)}。
\stopANSWER

%e6.1-2
\startEXERCISE[exercise:heap_height]
證明：含 \m{n} 個元素的堆的高度爲 \m{\lfloor \lg{n} \rfloor}。
\stopEXERCISE

\startANSWER
由上個練習可知 \m{n \in (2^h, 2^{h+1} - 1)}，所以高度爲 \m{\lfloor \lg{n} \rfloor}。
\stopANSWER

%e6.1-3
\startEXERCISE
證明：在最大堆的任一子樹中，該子樹所包含的最大元素在該子樹的根節點上。
\stopEXERCISE

\startANSWER
這就是最大堆的性質。

即設子樹的根節點是第 \m{i} 個元素，則他的子節點均小於或等於他。
由於其子節點均滿足此性質，且此性質是可傳遞的，所有節點均小於或等於根節點，
因此根節點是最大的。
\stopANSWER

%e6.1-4
\startEXERCISE
假設一個最大堆的所有元素都不相同，那麼該堆的最小元素應該位於哪裏？
\stopEXERCISE

\startANSWER
可能在任何一個葉子節點上，即索引爲 \m{\lfloor n/2 \rfloor + 1} 的元素
（參見\inexercise[heap_leave]），即堆數列的右半部分中。
\stopANSWER

%e6.1-5
\startEXERCISE
一個已排好序的數列是最小堆嗎？
\stopEXERCISE

\startANSWER
是。對任一索引 \m{i}， \ALGO{LEFT(i)} 和 \ALGO{RIGHT(i)} 均要大於 \m{i}，
相應的元素均大於或等於 \m{A[i]}（數列是排好序的）。
\stopANSWER

%e6.1-6
\startEXERCISE
數列 \m{\langle 23, 17, 14, 6, 13, 10, 1, 5, 7, 12 \rangle} 是最大堆嗎？
\stopEXERCISE

\startANSWER
不是。 \m{7} 比 \m{6} 大。

\externalfigure[output/e6_1_6-1]

\stopANSWER

%e6.1-7
\startEXERCISE[exercise:heap_leave]
證明：用數列表示有 \m{n} 個元素的堆時，
葉子節點的索引爲 \m{\lfloor n/2 \rfloor + 1,\lfloor n/2 \rfloor + 2, \ldots, n}。
\stopEXERCISE

\startANSWER
若索引爲 \m{i} 的節點是葉子節點，則沒有子節點，等價於：
\startformula\startmathalignment[n=1]
\NC \mfunction{LEFT}(i) = 2 i > n \NR
\NC i > n/2 \NR
\NC i \ge (\lfloor n/2 \rfloor + 1) \NR
\stopmathalignment\stopformula
\stopANSWER

\stopsection%Heaps
