\startsection[
  title={Insertion sort},,
  reference=section:insersion_sort,
]

\startEXERCISE
參照圖 2.2，描述如何對數列 $A = \langle 31, 41, 59, 26, 41, 58\rangle$ 進行排序。
\stopEXERCISE

\startANSWER
\startcombination[3*2]
{\externalfigure[output/e2_1_1-1]}{a}
{\externalfigure[output/e2_1_1-2]}{b}
{\externalfigure[output/e2_1_1-3]}{c}
{\externalfigure[output/e2_1_1-4]}{d}
{\externalfigure[output/e2_1_1-5]}{e}
{\externalfigure[output/e2_1_1-6]}{f}
\stopcombination
\stopANSWER

\startEXERCISE
\ALGO{SUM-ARRAY} 用於計算數列 $A[1:n]$ 中 $n$ 個數的和。
試對其循環不變性的初始化、保持、終止進行分析，
並據此説明此算法是如何得到 $A[1:n]$ 的和的。

\CLRSH{SUM-ARRAY(A, n)}
\startCLRSCODE
sum = 0
for i = 1 to n
	sum = sum + A[i]
return sum
\stopCLRSCODE
\stopEXERCISE

\startANSWER
\startigBase
\item 初始化：第一次迭代前， \m{sum} 是 \m{A[1..i-1]} 中元素的和；
\item 保持：每次迭代后， \m{sum} 是 \m{A[1..i]} 中元素的和；
\item 終止：迭代終止后， \m{sum} 是 \m{A[1..n]} 中元素的和。
\stopigBase
\stopANSWER

\startEXERCISE
重寫插入\ALGO{INSERTION-SORT} 例程，以實現遞減排序。
\stopEXERCISE
\startANSWER

\startCLRSCODE
for j = 2 to A.length
	key = A[j]
	// Insert $A[j]$ into the sorted sequence $A[1 .. j-1]$.
	i = j - 1
	while i > 0 and A[i] > key
		A[i+1] = A[i]
		i = i - 1
	A[i + 1] = key
\stopCLRSCODE

\startcombination[3*2]
{\externalfigure[output/e2_1_2-1]}{a}
{\externalfigure[output/e2_1_2-2]}{b}
{\externalfigure[output/e2_1_2-3]}{c}
{\externalfigure[output/e2_1_2-4]}{d}
{\externalfigure[output/e2_1_2-5]}{e}
{\externalfigure[output/e2_1_2-6]}{f}
\stopcombination
\stopANSWER

\startEXERCISE[exercise:linear_earch]
線性查找問題：

輸入： 数值 $x$ 以及数列 $A[1:n]$，
数列 $A$ 中的 $n$ 個數分别为 $\langle a_1, a_2, ..., a_n \rangle$。

輸出：索引 $i$ （滿足 $x = A[i]$），
或者 $\NIL$（如果 $A$ 中沒有 $x$）。

請給出在數列中搜索 $x$ 的綫性查找算法的僞碼。
用循環不變性證明算法的正確性，確保滿足循環不變性三個必需的性質。
\stopEXERCISE

\startANSWER
\startCLRSCODE
for j = 1 to A.length
	if A[i] == v
		return i
return NIL
\stopCLRSCODE
\stopANSWER

\startEXERCISE
有兩個 $n$ 位二進制整數 $a$ 和 $b$，
存儲在兩個元素數目為 $n$ 的數列 $A[0:n-1]$ 和 $B[0:n-1]$ 中，
數列中的所有元素均為 $0$ 或 $1$，
$a = \sum_{i=0}^{n-1}A[i]\cdot 2^i$，
$b = \sum_{i=0}^{n-1}B[i]\cdot 2^i$。
數列 $C[0:n]$ 用於存儲兩數之和 $c=a+b$，
$c = \sum_{i=0}^{n}C[i]\cdot 2^i$。
請給出例程 \ALGO{ADD-BINARY-INTEGERS}，
其輸入為數列 $A$ 和 $B$，長度均爲 $n$，
返回的數列 $C$ 中存儲兩數之和。
\stopEXERCISE
\startANSWER

\startCLRSCODE
for i = 1 to n + 1
	C[i] = 0
for i = 1 to n
	if A[i] == 1 and B[i] == 1
		C[i+1] = 1
	else if A[i] == 1 or B[i] == 1
		if C[i] == 1
			C[i] = 0
			C[i+1] = 1
		else
			C[i] = 1
\stopCLRSCODE

\stopANSWER

\stopsection
